\hypertarget{fs_8c}{}\doxysection{fs.\+c File Reference}
\label{fs_8c}\index{fs.c@{fs.c}}
{\ttfamily \#include \char`\"{}types.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}defs.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}param.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stat.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mmu.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}proc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}spinlock.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sleeplock.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}fs.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}buf.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}file.\+h\char`\"{}}\newline
Include dependency graph for fs.\+c\+:
% FIG 0
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{fs_8c_ac6afabdc09a49a433ee19d8a9486056d}{min}}(a,  b)~((a) $<$ (b) ? (a) \+: (b))
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{fs_8c_aff0080b2133027be2e525ca088b40e78}{readsb}} (int dev, struct \mbox{\hyperlink{structsuperblock}{superblock}} $\ast$\mbox{\hyperlink{mkfs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}})
\item 
void \mbox{\hyperlink{fs_8c_a301761a27cf266e0bad483272fb31a3c}{iinit}} (int dev)
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{fs_8c_adb360ce0b70a32d19d089fba4cd91293}{ialloc}} (\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} dev, short type)
\item 
void \mbox{\hyperlink{fs_8c_a7220afa8e5f4bea540eb95879ea7df6e}{iupdate}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$ip)
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{fs_8c_a6b41577cc09b2a009be8f84bfb500079}{idup}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$ip)
\item 
void \mbox{\hyperlink{fs_8c_aed28187406d84a3aa71f10c6235a03ec}{ilock}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$ip)
\item 
void \mbox{\hyperlink{fs_8c_ae4e29916219b9293b37f9c34220694fe}{iunlock}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$ip)
\item 
void \mbox{\hyperlink{fs_8c_ab3c447f135c68e4c3c1f8d5866f6e77b}{iput}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$ip)
\item 
void \mbox{\hyperlink{fs_8c_a207b3008bae35596c55ec7c4fc6875eb}{iunlockput}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$ip)
\item 
void \mbox{\hyperlink{fs_8c_a4ccff0bd4d9802e709d0af8d71a59861}{stati}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$ip, struct \mbox{\hyperlink{structstat}{stat}} $\ast$st)
\item 
int \mbox{\hyperlink{fs_8c_a3aba1fa9f6789d09356aec5b96d91fa8}{readi}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$ip, char $\ast$dst, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} off, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} n)
\item 
int \mbox{\hyperlink{fs_8c_a15858f4d8a4cc1def3d84d03c312836b}{writei}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$ip, char $\ast$src, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} off, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} n)
\item 
int \mbox{\hyperlink{fs_8c_ae74f6e5b19a4e7f3e72807ee67141819}{namecmp}} (const char $\ast$s, const char $\ast$t)
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{fs_8c_aa182c62fade7a0bae9408830d5e06d4f}{dirlookup}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$dp, char $\ast$name, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} $\ast$poff)
\item 
int \mbox{\hyperlink{fs_8c_a69a135a0e8a06d9f306d77ebc0c1f7a0}{dirlink}} (struct \mbox{\hyperlink{structinode}{inode}} $\ast$dp, char $\ast$name, \mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} inum)
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{fs_8c_a9baba030d5bc6e9e20cf8b7d181edf35}{namei}} (char $\ast$path)
\item 
struct \mbox{\hyperlink{structinode}{inode}} $\ast$ \mbox{\hyperlink{fs_8c_a5a987ca4f8ffd579b96a8b9a60e61a7c}{nameiparent}} (char $\ast$path, char $\ast$name)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structsuperblock}{superblock}} \mbox{\hyperlink{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}{sb}}
\item 
\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>struct \mbox{\hyperlink{structspinlock}{spinlock}} \mbox{\hyperlink{fs_8c_ab28e82cd5dda7d960095706a3ea20572}{lock}}\\
\>struct \mbox{\hyperlink{structinode}{inode}} \mbox{\hyperlink{fs_8c_a6baaf26dd83b71b8d684c5d54a709e31}{inode}} \mbox{[}\mbox{\hyperlink{param_8h_adabafa10c7951be7c875cd2ee212be85}{NINODE}}\mbox{]}\\
\} \mbox{\hyperlink{fs_8c_a5a78db4f7c856337d906f0606b19bff5}{icache}}\\

\end{tabbing}\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{fs_8c_ac6afabdc09a49a433ee19d8a9486056d}\label{fs_8c_ac6afabdc09a49a433ee19d8a9486056d}} 
\index{fs.c@{fs.c}!min@{min}}
\index{min@{min}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{min}{min}}
{\footnotesize\ttfamily \#define min(\begin{DoxyParamCaption}\item[{}]{a,  }\item[{}]{b }\end{DoxyParamCaption})~((a) $<$ (b) ? (a) \+: (b))}



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{fs_8c_a69a135a0e8a06d9f306d77ebc0c1f7a0}\label{fs_8c_a69a135a0e8a06d9f306d77ebc0c1f7a0}} 
\index{fs.c@{fs.c}!dirlink@{dirlink}}
\index{dirlink@{dirlink}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{dirlink()}{dirlink()}}
{\footnotesize\ttfamily int dirlink (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{dp,  }\item[{char $\ast$}]{name,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{inum }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 1
Here is the caller graph for this function\+:
% FIG 2
\mbox{\Hypertarget{fs_8c_aa182c62fade7a0bae9408830d5e06d4f}\label{fs_8c_aa182c62fade7a0bae9408830d5e06d4f}} 
\index{fs.c@{fs.c}!dirlookup@{dirlookup}}
\index{dirlookup@{dirlookup}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{dirlookup()}{dirlookup()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}}$\ast$ dirlookup (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{dp,  }\item[{char $\ast$}]{name,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} $\ast$}]{poff }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 3
Here is the caller graph for this function\+:
% FIG 4
\mbox{\Hypertarget{fs_8c_adb360ce0b70a32d19d089fba4cd91293}\label{fs_8c_adb360ce0b70a32d19d089fba4cd91293}} 
\index{fs.c@{fs.c}!ialloc@{ialloc}}
\index{ialloc@{ialloc}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{ialloc()}{ialloc()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}}$\ast$ ialloc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{dev,  }\item[{short}]{type }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 5
\mbox{\Hypertarget{fs_8c_a6b41577cc09b2a009be8f84bfb500079}\label{fs_8c_a6b41577cc09b2a009be8f84bfb500079}} 
\index{fs.c@{fs.c}!idup@{idup}}
\index{idup@{idup}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{idup()}{idup()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}}$\ast$ idup (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 6
\mbox{\Hypertarget{fs_8c_a301761a27cf266e0bad483272fb31a3c}\label{fs_8c_a301761a27cf266e0bad483272fb31a3c}} 
\index{fs.c@{fs.c}!iinit@{iinit}}
\index{iinit@{iinit}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{iinit()}{iinit()}}
{\footnotesize\ttfamily void iinit (\begin{DoxyParamCaption}\item[{int}]{dev }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 7
Here is the caller graph for this function\+:
% FIG 8
\mbox{\Hypertarget{fs_8c_aed28187406d84a3aa71f10c6235a03ec}\label{fs_8c_aed28187406d84a3aa71f10c6235a03ec}} 
\index{fs.c@{fs.c}!ilock@{ilock}}
\index{ilock@{ilock}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{ilock()}{ilock()}}
{\footnotesize\ttfamily void ilock (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 9
Here is the caller graph for this function\+:
% FIG 10
\mbox{\Hypertarget{fs_8c_ab3c447f135c68e4c3c1f8d5866f6e77b}\label{fs_8c_ab3c447f135c68e4c3c1f8d5866f6e77b}} 
\index{fs.c@{fs.c}!iput@{iput}}
\index{iput@{iput}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{iput()}{iput()}}
{\footnotesize\ttfamily void iput (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 11
Here is the caller graph for this function\+:
% FIG 12
\mbox{\Hypertarget{fs_8c_ae4e29916219b9293b37f9c34220694fe}\label{fs_8c_ae4e29916219b9293b37f9c34220694fe}} 
\index{fs.c@{fs.c}!iunlock@{iunlock}}
\index{iunlock@{iunlock}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{iunlock()}{iunlock()}}
{\footnotesize\ttfamily void iunlock (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 13
Here is the caller graph for this function\+:
% FIG 14
\mbox{\Hypertarget{fs_8c_a207b3008bae35596c55ec7c4fc6875eb}\label{fs_8c_a207b3008bae35596c55ec7c4fc6875eb}} 
\index{fs.c@{fs.c}!iunlockput@{iunlockput}}
\index{iunlockput@{iunlockput}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{iunlockput()}{iunlockput()}}
{\footnotesize\ttfamily void iunlockput (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 15
Here is the caller graph for this function\+:
% FIG 16
\mbox{\Hypertarget{fs_8c_a7220afa8e5f4bea540eb95879ea7df6e}\label{fs_8c_a7220afa8e5f4bea540eb95879ea7df6e}} 
\index{fs.c@{fs.c}!iupdate@{iupdate}}
\index{iupdate@{iupdate}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{iupdate()}{iupdate()}}
{\footnotesize\ttfamily void iupdate (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 17
Here is the caller graph for this function\+:
% FIG 18
\mbox{\Hypertarget{fs_8c_ae74f6e5b19a4e7f3e72807ee67141819}\label{fs_8c_ae74f6e5b19a4e7f3e72807ee67141819}} 
\index{fs.c@{fs.c}!namecmp@{namecmp}}
\index{namecmp@{namecmp}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{namecmp()}{namecmp()}}
{\footnotesize\ttfamily int namecmp (\begin{DoxyParamCaption}\item[{const char $\ast$}]{s,  }\item[{const char $\ast$}]{t }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 19
Here is the caller graph for this function\+:
% FIG 20
\mbox{\Hypertarget{fs_8c_a9baba030d5bc6e9e20cf8b7d181edf35}\label{fs_8c_a9baba030d5bc6e9e20cf8b7d181edf35}} 
\index{fs.c@{fs.c}!namei@{namei}}
\index{namei@{namei}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{namei()}{namei()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}}$\ast$ namei (\begin{DoxyParamCaption}\item[{char $\ast$}]{path }\end{DoxyParamCaption})}

Here is the caller graph for this function\+:
% FIG 21
\mbox{\Hypertarget{fs_8c_a5a987ca4f8ffd579b96a8b9a60e61a7c}\label{fs_8c_a5a987ca4f8ffd579b96a8b9a60e61a7c}} 
\index{fs.c@{fs.c}!nameiparent@{nameiparent}}
\index{nameiparent@{nameiparent}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{nameiparent()}{nameiparent()}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}}$\ast$ nameiparent (\begin{DoxyParamCaption}\item[{char $\ast$}]{path,  }\item[{char $\ast$}]{name }\end{DoxyParamCaption})}

Here is the caller graph for this function\+:
% FIG 22
\mbox{\Hypertarget{fs_8c_a3aba1fa9f6789d09356aec5b96d91fa8}\label{fs_8c_a3aba1fa9f6789d09356aec5b96d91fa8}} 
\index{fs.c@{fs.c}!readi@{readi}}
\index{readi@{readi}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{readi()}{readi()}}
{\footnotesize\ttfamily int readi (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip,  }\item[{char $\ast$}]{dst,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{off,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{n }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 23
Here is the caller graph for this function\+:
% FIG 24
\mbox{\Hypertarget{fs_8c_aff0080b2133027be2e525ca088b40e78}\label{fs_8c_aff0080b2133027be2e525ca088b40e78}} 
\index{fs.c@{fs.c}!readsb@{readsb}}
\index{readsb@{readsb}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{readsb()}{readsb()}}
{\footnotesize\ttfamily void readsb (\begin{DoxyParamCaption}\item[{int}]{dev,  }\item[{struct \mbox{\hyperlink{structsuperblock}{superblock}} $\ast$}]{sb }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 25
Here is the caller graph for this function\+:
% FIG 26
\mbox{\Hypertarget{fs_8c_a4ccff0bd4d9802e709d0af8d71a59861}\label{fs_8c_a4ccff0bd4d9802e709d0af8d71a59861}} 
\index{fs.c@{fs.c}!stati@{stati}}
\index{stati@{stati}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{stati()}{stati()}}
{\footnotesize\ttfamily void stati (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip,  }\item[{struct \mbox{\hyperlink{structstat}{stat}} $\ast$}]{st }\end{DoxyParamCaption})}

Here is the caller graph for this function\+:
% FIG 27
\mbox{\Hypertarget{fs_8c_a15858f4d8a4cc1def3d84d03c312836b}\label{fs_8c_a15858f4d8a4cc1def3d84d03c312836b}} 
\index{fs.c@{fs.c}!writei@{writei}}
\index{writei@{writei}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{writei()}{writei()}}
{\footnotesize\ttfamily int writei (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structinode}{inode}} $\ast$}]{ip,  }\item[{char $\ast$}]{src,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{off,  }\item[{\mbox{\hyperlink{types_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{n }\end{DoxyParamCaption})}

Here is the call graph for this function\+:
% FIG 28
Here is the caller graph for this function\+:
% FIG 29


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{fs_8c_a5a78db4f7c856337d906f0606b19bff5}\label{fs_8c_a5a78db4f7c856337d906f0606b19bff5}} 
\index{fs.c@{fs.c}!icache@{icache}}
\index{icache@{icache}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{icache}{icache}}
{\footnotesize\ttfamily struct \{ ... \}  icache}

\mbox{\Hypertarget{fs_8c_a6baaf26dd83b71b8d684c5d54a709e31}\label{fs_8c_a6baaf26dd83b71b8d684c5d54a709e31}} 
\index{fs.c@{fs.c}!inode@{inode}}
\index{inode@{inode}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{inode}{inode}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structinode}{inode}} \mbox{\hyperlink{structinode}{inode}}\mbox{[}\mbox{\hyperlink{param_8h_adabafa10c7951be7c875cd2ee212be85}{N\+I\+N\+O\+DE}}\mbox{]}}

\mbox{\Hypertarget{fs_8c_ab28e82cd5dda7d960095706a3ea20572}\label{fs_8c_ab28e82cd5dda7d960095706a3ea20572}} 
\index{fs.c@{fs.c}!lock@{lock}}
\index{lock@{lock}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{lock}{lock}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structspinlock}{spinlock}} lock}

\mbox{\Hypertarget{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}\label{fs_8c_a0248d0bac625de5a1415f2f8c91f3343}} 
\index{fs.c@{fs.c}!sb@{sb}}
\index{sb@{sb}!fs.c@{fs.c}}
\doxysubsubsection{\texorpdfstring{sb}{sb}}
{\footnotesize\ttfamily struct \mbox{\hyperlink{structsuperblock}{superblock}} sb}

